{"ast":null,"code":"var _jsxFileName = \"E:\\\\ME\\\\New folder\\\\Study\\\\Placements\\\\Internships\\\\projects\\\\python\\\\wardrobe\\\\frontend\\\\src\\\\components\\\\VirtualTryOn.tsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport { Pose } from '@mediapipe/pose';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VirtualTryOn = ({\n  top,\n  bottom,\n  onePiece,\n  className\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const poseRef = useRef(null);\n  useEffect(() => {\n    const pose = new Pose({\n      locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`\n    });\n    pose.setOptions({\n      modelComplexity: 1,\n      smoothLandmarks: true,\n      enableSegmentation: true,\n      smoothSegmentation: true,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5\n    });\n    poseRef.current = pose;\n    const canvas = canvasRef.current;\n    const ctx = canvas === null || canvas === void 0 ? void 0 : canvas.getContext('2d');\n    if (ctx && canvas) {\n      const modelImage = new Image();\n      modelImage.src = '/model-removebg-preview.png';\n      modelImage.onload = () => {\n        pose.onResults(results => {\n          if (!results.poseLandmarks) return;\n          canvas.width = modelImage.width;\n          canvas.height = modelImage.height;\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          ctx.drawImage(modelImage, 0, 0, canvas.width, canvas.height);\n          const drawClothing = (clothingImage, category) => {\n            const landmarks = results.poseLandmarks;\n            if (!landmarks) return;\n            const leftShoulder = landmarks[11];\n            const rightShoulder = landmarks[12];\n            const leftHip = landmarks[23];\n            const rightHip = landmarks[24];\n            const leftKnee = landmarks[25];\n            const rightKnee = landmarks[26];\n            if (category === 'top' && leftShoulder && rightShoulder && leftHip && rightHip) {\n              const torsoWidth = Math.abs(rightShoulder.x - leftShoulder.x) * canvas.width;\n              const torsoHeight = Math.abs(leftHip.y - leftShoulder.y) * canvas.height;\n              const centerX = (leftShoulder.x + rightShoulder.x) / 2 * canvas.width;\n              const topY = leftShoulder.y * canvas.height;\n              const scaleFactor = 1.5;\n              const finalWidth = torsoWidth * scaleFactor;\n              const finalHeight = torsoHeight * 1.2;\n              ctx.drawImage(clothingImage, centerX - finalWidth / 2, topY, finalWidth, finalHeight);\n            } else if (category === 'bottom' && leftHip && rightHip && leftKnee && rightKnee) {\n              const hipWidth = Math.abs(rightHip.x - leftHip.x) * canvas.width;\n              const legHeight = Math.abs(leftKnee.y - leftHip.y) * canvas.height;\n              const centerX = (leftHip.x + rightHip.x) / 2 * canvas.width;\n              const topY = leftHip.y * canvas.height;\n              const scaleFactor = 1.2;\n              const finalWidth = hipWidth * scaleFactor;\n              const finalHeight = legHeight * 1.1;\n              ctx.drawImage(clothingImage, centerX - finalWidth / 2, topY, finalWidth, finalHeight);\n            } else if (category === 'onePiece' && leftShoulder && rightShoulder && leftKnee && rightKnee) {\n              const bodyWidth = Math.abs(rightShoulder.x - leftShoulder.x) * canvas.width;\n              const bodyHeight = Math.abs(leftKnee.y - leftShoulder.y) * canvas.height;\n              const centerX = (leftShoulder.x + rightShoulder.x) / 2 * canvas.width;\n              const topY = leftShoulder.y * canvas.height;\n              const scaleFactor = 1.5;\n              const finalWidth = bodyWidth * scaleFactor;\n              const finalHeight = bodyHeight * 1.05;\n              ctx.drawImage(clothingImage, centerX - finalWidth / 2, topY, finalWidth, finalHeight);\n            }\n          };\n          if (top) {\n            const topImage = new Image();\n            topImage.src = top;\n            topImage.onload = () => drawClothing(topImage, 'top');\n          }\n          if (bottom) {\n            const bottomImage = new Image();\n            bottomImage.src = bottom;\n            bottomImage.onload = () => drawClothing(bottomImage, 'bottom');\n          }\n          if (onePiece) {\n            const onePieceImage = new Image();\n            onePieceImage.src = onePiece;\n            onePieceImage.onload = () => drawClothing(onePieceImage, 'onePiece');\n          }\n        });\n      };\n    }\n    return () => {\n      pose.close();\n    };\n  }, []);\n  useEffect(() => {\n    const pose = poseRef.current;\n    const canvas = canvasRef.current;\n    if (pose && canvas) {\n      const modelImage = new Image();\n      modelImage.src = '/model-removebg-preview.png';\n      modelImage.onload = () => {\n        pose.send({\n          image: modelImage\n        });\n      };\n    }\n  }, [top, bottom, onePiece]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    className: className\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 10\n  }, this);\n};\n_s(VirtualTryOn, \"Vccxy0wb209jhHjquBkHovqsecs=\");\n_c = VirtualTryOn;\nexport default VirtualTryOn;\nvar _c;\n$RefreshReg$(_c, \"VirtualTryOn\");","map":{"version":3,"names":["React","useRef","useEffect","Pose","jsxDEV","_jsxDEV","VirtualTryOn","top","bottom","onePiece","className","_s","canvasRef","poseRef","pose","locateFile","file","setOptions","modelComplexity","smoothLandmarks","enableSegmentation","smoothSegmentation","minDetectionConfidence","minTrackingConfidence","current","canvas","ctx","getContext","modelImage","Image","src","onload","onResults","results","poseLandmarks","width","height","clearRect","drawImage","drawClothing","clothingImage","category","landmarks","leftShoulder","rightShoulder","leftHip","rightHip","leftKnee","rightKnee","torsoWidth","Math","abs","x","torsoHeight","y","centerX","topY","scaleFactor","finalWidth","finalHeight","hipWidth","legHeight","bodyWidth","bodyHeight","topImage","bottomImage","onePieceImage","close","send","image","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["E:/ME/New folder/Study/Placements/Internships/projects/python/wardrobe/frontend/src/components/VirtualTryOn.tsx"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { Pose, POSE_CONNECTIONS } from '@mediapipe/pose';\nimport { drawConnectors } from '@mediapipe/drawing_utils';\n\ninterface VirtualTryOnProps {\n  top?: string;\n  bottom?: string;\n  onePiece?: string;\n  className?: string;\n}\n\nconst VirtualTryOn: React.FC<VirtualTryOnProps> = ({ top, bottom, onePiece, className }) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const poseRef = useRef<any>(null);\n\n  useEffect(() => {\n    const pose = new Pose({\n      locateFile: (file: string) => `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`,\n    });\n\n    pose.setOptions({\n      modelComplexity: 1,\n      smoothLandmarks: true,\n      enableSegmentation: true,\n      smoothSegmentation: true,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5,\n    });\n\n    poseRef.current = pose;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas?.getContext('2d');\n\n    if (ctx && canvas) {\n      const modelImage = new Image();\n      modelImage.src = '/model-removebg-preview.png';\n      modelImage.onload = () => {\n        pose.onResults((results: any) => {\n          if (!results.poseLandmarks) return;\n\n          canvas.width = modelImage.width;\n          canvas.height = modelImage.height;\n\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          ctx.drawImage(modelImage, 0, 0, canvas.width, canvas.height);\n\n          const drawClothing = (clothingImage: HTMLImageElement, category: 'top' | 'bottom' | 'onePiece') => {\n            const landmarks = results.poseLandmarks;\n            if (!landmarks) return;\n\n            const leftShoulder = landmarks[11];\n            const rightShoulder = landmarks[12];\n            const leftHip = landmarks[23];\n            const rightHip = landmarks[24];\n            const leftKnee = landmarks[25];\n            const rightKnee = landmarks[26];\n\n            if (category === 'top' && leftShoulder && rightShoulder && leftHip && rightHip) {\n              const torsoWidth = Math.abs(rightShoulder.x - leftShoulder.x) * canvas.width;\n              const torsoHeight = Math.abs(leftHip.y - leftShoulder.y) * canvas.height;\n              const centerX = ((leftShoulder.x + rightShoulder.x) / 2) * canvas.width;\n              const topY = leftShoulder.y * canvas.height;\n              const scaleFactor = 1.5;\n              const finalWidth = torsoWidth * scaleFactor;\n              const finalHeight = torsoHeight * 1.2;\n              ctx.drawImage(clothingImage, centerX - finalWidth / 2, topY, finalWidth, finalHeight);\n            } else if (category === 'bottom' && leftHip && rightHip && leftKnee && rightKnee) {\n              const hipWidth = Math.abs(rightHip.x - leftHip.x) * canvas.width;\n              const legHeight = Math.abs(leftKnee.y - leftHip.y) * canvas.height;\n              const centerX = ((leftHip.x + rightHip.x) / 2) * canvas.width;\n              const topY = leftHip.y * canvas.height;\n              const scaleFactor = 1.2;\n              const finalWidth = hipWidth * scaleFactor;\n              const finalHeight = legHeight * 1.1;\n              ctx.drawImage(clothingImage, centerX - finalWidth / 2, topY, finalWidth, finalHeight);\n            } else if (category === 'onePiece' && leftShoulder && rightShoulder && leftKnee && rightKnee) {\n              const bodyWidth = Math.abs(rightShoulder.x - leftShoulder.x) * canvas.width;\n              const bodyHeight = Math.abs(leftKnee.y - leftShoulder.y) * canvas.height;\n              const centerX = ((leftShoulder.x + rightShoulder.x) / 2) * canvas.width;\n              const topY = leftShoulder.y * canvas.height;\n              const scaleFactor = 1.5;\n              const finalWidth = bodyWidth * scaleFactor;\n              const finalHeight = bodyHeight * 1.05;\n              ctx.drawImage(clothingImage, centerX - finalWidth / 2, topY, finalWidth, finalHeight);\n            }\n          };\n\n          if (top) {\n            const topImage = new Image();\n            topImage.src = top;\n            topImage.onload = () => drawClothing(topImage, 'top');\n          }\n          if (bottom) {\n            const bottomImage = new Image();\n            bottomImage.src = bottom;\n            bottomImage.onload = () => drawClothing(bottomImage, 'bottom');\n          }\n          if (onePiece) {\n            const onePieceImage = new Image();\n            onePieceImage.src = onePiece;\n            onePieceImage.onload = () => drawClothing(onePieceImage, 'onePiece');\n          }\n        });\n      };\n    }\n\n    return () => {\n      pose.close();\n    };\n  }, []);\n\n  useEffect(() => {\n    const pose = poseRef.current;\n    const canvas = canvasRef.current;\n    if (pose && canvas) {\n      const modelImage = new Image();\n      modelImage.src = '/model-removebg-preview.png';\n      modelImage.onload = () => {\n        pose.send({ image: modelImage });\n      };\n    }\n  }, [top, bottom, onePiece]);\n\n  return <canvas ref={canvasRef} className={className} />;\n};\n\nexport default VirtualTryOn;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}